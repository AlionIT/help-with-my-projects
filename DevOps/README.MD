# –í–°–ï –ü–£–¢–ò –≤ DevOps

- –ò–º–µ–µ–º –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –Ω–∞ TypeScript - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤—Å–µ –ø—É—Ç–∏ –µ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ VPS/VDS:
  `–∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ`


    1Ô∏è‚É£ TypeScript ‚Üí JavaScript
    `npm run build`

    –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

    –î–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
    src/
    ‚îú‚îÄ‚îÄ server.ts                    # TypeScript
    ‚îú‚îÄ‚îÄ modules/
    ‚îÇ   ‚îî‚îÄ‚îÄ log/
    ‚îÇ       ‚îî‚îÄ‚îÄ workers/
    ‚îÇ           ‚îî‚îÄ‚îÄ toFile/
    ‚îÇ               ‚îî‚îÄ‚îÄ toFile.ts    # TypeScript
    ‚îî‚îÄ‚îÄ utils/
        ‚îî‚îÄ‚îÄ logger.ts

    –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
    dist/
    ‚îú‚îÄ‚îÄ server.js                    # JavaScript ‚úÖ
    ‚îú‚îÄ‚îÄ modules/
    ‚îÇ   ‚îî‚îÄ‚îÄ log/
    ‚îÇ       ‚îî‚îÄ‚îÄ workers/
    ‚îÇ           ‚îî‚îÄ‚îÄ toFile/
    ‚îÇ               ‚îî‚îÄ‚îÄ toFile.js    # JavaScript ‚úÖ
    ‚îî‚îÄ‚îÄ utils/
        ‚îî‚îÄ‚îÄ logger.js

    –ë—ã–ª–æ (TypeScript):
        typescript
        // src/modules/log/workers/toFile/toFile.ts
        export const name: string = 'toFile';

        export function log(level: string, message: string): void {
            console.log(`[${level}] ${message}`);
        }

    –°—Ç–∞–ª–æ (JavaScript):
        javascript
        // dist/modules/log/workers/toFile/toFile.js
        export const name = 'toFile';

        export function log(level, message) {
            console.log(`[${level}] ${message}`);
        }

        –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è! ‚úÖ





    2Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–∞
    `docker build -t my-app`


    –¢—ã –ø–∏—à–µ—à—å –∫–æ–º–∞–Ω–¥—É docker build -t my-app .. Docker –±–µ—Ä–µ—Ç —Ç–≤–æ–π Dockerfile –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–≥–æ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ.

    –ß—Ç–æ —Ç–∞–∫–æ–µ –û–±—Ä–∞–∑ (Image)? –≠—Ç–æ –Ω–µ –æ–¥–∏–Ω —Ñ–∞–π–ª (–∫–∞–∫ .exe –∏–ª–∏ .zip), –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∏—Ç —É —Ç–µ–±—è –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ.
    –≠—Ç–æ —Å–ª–æ–µ–Ω—ã–π –ø–∏—Ä–æ–≥, —Ö—Ä–∞–Ω—è—â–∏–π—Å—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –î–æ–∫–µ—Ä–∞ (/var/lib/docker/...).

    –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏?
     ‚òõ –°–ª–æ–π OS (–Ω–∞–ø—Ä–∏–º–µ—Ä, Alpine Linux ‚Äî –≤–µ—Å–∏—Ç 5 –ú–ë).
     ‚òõ –°–ª–æ–π Node.js (—Ä–∞–Ω—Ç–∞–π–º).
     ‚òõ –ª–æ–π node_modules (—Ç–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏).
     ‚òõ –°–ª–æ–π dist/ (—Ç–≤–æ–π —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JS –∫–æ–¥).
     ‚óè –í –∏—Ç–æ–≥–µ –û–±—Ä–∞–∑ ‚Äî —ç—Ç–æ –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω–∞—è –∫–æ–ø–∏—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å–æ –≤—Å–µ–º –≥–æ—Ç–æ–≤—ã–º –∫ –∑–∞–ø—É—Å–∫—É.

     ‚òõ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞
         CMD ["node", "dist/server.js"]
    
    –≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤—Å–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã Docker.


    –ö–∞–∫ –æ–±—Ä–∞–∑ –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä? (Upload vs Download)
    –¢—ã —Å–ø—Ä–æ—Å–∏–ª: "–ó–∞—á–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ —è –º–æ–≥—É –∑–∞–≥—Ä—É–∑–∏—Ç—å?"

    –°–ø–æ—Å–æ–± "–î–µ–¥–æ–≤—Å–∫–∏–π" (–†—É—á–Ω–æ–π Upload): –¢—ã –º–æ–∂–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑ –≤ —Ñ–∞–π–ª: docker save my-app > my-app.tar. –ó–∞–≥—Ä—É–∑–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª (300-500 –ú–ë) –ø–æ FTP/SCP –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –¢–∞–º —Å–¥–µ–ª–∞—Ç—å docker load < my-app.tar. üõë –ü–æ—á–µ–º—É —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞—é—Ç: –≠—Ç–æ –¥–æ–ª–≥–æ. –ö–∞–∂–¥—ã–π —Ä–∞–∑ —Ç—ã —Ç–∞—â–∏—à—å –≤–µ—Å—å —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º.

    –°–ø–æ—Å–æ–± "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π" (Registry): –¢—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –†–µ–µ—Å—Ç—Ä –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (Registry). –≠—Ç–æ –∫–∞–∫ GitHub, —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤. –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–ª—è —Ç–µ–±—è ‚Äî GitHub Container Registry (GHCR).

    –ù–∞ –∫–æ–º–ø–µ: docker push ghcr.io/alionit/vibeimp:v1 (–û–±—Ä–∞–∑ —É–ª–µ—Ç–µ–ª –≤ –æ–±–ª–∞–∫–æ GitHub).

    –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –í docker-compose.yml –Ω–∞–ø–∏—Å–∞–Ω–æ image: ghcr.io/alionit/vibeimp:v1.

    –ó–∞–ø—É—Å–∫: –ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å docker-compose up, —Å–µ—Ä–≤–µ—Ä –∏–¥–µ—Ç –Ω–∞ GitHub, –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–∑.

    ‚úÖ –í —á–µ–º –≤—ã–≥–æ–¥–∞: Docker —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ï—Å–ª–∏ —Ç—ã –ø–æ–º–µ–Ω—è–ª –æ–¥–Ω—É —Å—Ç—Ä–æ—á–∫—É –∫–æ–¥–∞, –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–µ—Ç–∏—Ç —Ç–æ–ª—å–∫–æ 5 –ö–ë –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∞ –Ω–µ –≤–µ—Å—å –æ–±—Ä–∞–∑ –Ω–∞ 500 –ú–ë. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

–ì–¥–µ –æ–±—Ä–∞–∑—ã –≤–æ–æ–±—â–µ —Ö—Ä–∞–Ω—è—Ç—Å—è?
  –í –û–±–ª–∞—á–Ω–æ–º –°–∫–ª–∞–¥–µ (Container Registry).

–¢–≤–æ—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫:
  –¢–≤–æ–π –ö–æ–º–ø: –°–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç (PUSH) –Ω–∞ –°–∫–ª–∞–¥.
  –°–∫–ª–∞–¥ (Registry): –•—Ä–∞–Ω–∏—Ç –æ–±—Ä–∞–∑—ã (Docker Hub, GitHub Container Registry).
  –¢–≤–æ–π –°–µ—Ä–≤–µ—Ä: –°–∫–∞—á–∏–≤–∞–µ—Ç (PULL) –æ–±—Ä–∞–∑ —Å–æ –°–∫–ª–∞–¥–∞ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç.
